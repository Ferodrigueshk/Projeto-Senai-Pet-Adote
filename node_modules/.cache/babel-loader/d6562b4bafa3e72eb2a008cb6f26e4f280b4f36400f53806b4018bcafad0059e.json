{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { db } from \"../firebase/config\";\nimport { collection, query, where, orderBy, onSnapshot } from \"firebase/firestore\";\nexport const useFetchDocuments = (docCollection, uid = null) => {\n  _s();\n  const [documents, setDocuments] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    let q;\n    const collectionRef = collection(db, docCollection);\n    if (uid) {\n      q = query(collectionRef, where(\"uid\", \"==\", uid), orderBy(\"createdAt\", \"desc\"));\n    } else {\n      q = query(collectionRef, orderBy(\"createdAt\", \"desc\"));\n    }\n    const unsub = onSnapshot(q, snapshot => {\n      let results = [];\n      snapshot.forEach(doc => {\n        results.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      setDocuments(results);\n      setLoading(false);\n    }, error => {\n      console.log(error);\n      setError(\"Erro ao buscar documentos.\");\n      setLoading(false);\n    });\n    return () => unsub();\n  }, [docCollection, uid]);\n  return {\n    documents,\n    loading,\n    error\n  };\n};\n_s(useFetchDocuments, \"cddrZCrrDNpe2eKrXR1yB8cionE=\");","map":{"version":3,"names":["useState","useEffect","db","collection","query","where","orderBy","onSnapshot","useFetchDocuments","docCollection","uid","_s","documents","setDocuments","loading","setLoading","error","setError","q","collectionRef","unsub","snapshot","results","forEach","doc","push","id","data","console","log"],"sources":["/home/rafa/MINIBLOG/src/hooks/useFetchDocument.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { db } from \"../firebase/config\";\nimport { collection, query, where, orderBy, onSnapshot } from \"firebase/firestore\";\n\nexport const useFetchDocuments = (docCollection, uid = null) => {\n  const [documents, setDocuments] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n\n    let q;\n    const collectionRef = collection(db, docCollection);\n\n    if (uid) {\n      q = query(collectionRef, where(\"uid\", \"==\", uid), orderBy(\"createdAt\", \"desc\"));\n    } else {\n      q = query(collectionRef, orderBy(\"createdAt\", \"desc\"));\n    }\n\n    const unsub = onSnapshot(\n      q,\n      (snapshot) => {\n        let results = [];\n        snapshot.forEach((doc) => {\n          results.push({ id: doc.id, ...doc.data() });\n        });\n        setDocuments(results);\n        setLoading(false);\n      },\n      (error) => {\n        console.log(error);\n        setError(\"Erro ao buscar documentos.\");\n        setLoading(false);\n      }\n    );\n\n    return () => unsub();\n  }, [docCollection, uid]);\n\n  return { documents, loading, error };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,EAAE,QAAQ,oBAAoB;AACvC,SAASC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAEC,UAAU,QAAQ,oBAAoB;AAElF,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,aAAa,EAAEC,GAAG,GAAG,IAAI,KAAK;EAAAC,EAAA;EAC9D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACdc,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAIG,CAAC;IACL,MAAMC,aAAa,GAAGhB,UAAU,CAACD,EAAE,EAAEO,aAAa,CAAC;IAEnD,IAAIC,GAAG,EAAE;MACPQ,CAAC,GAAGd,KAAK,CAACe,aAAa,EAAEd,KAAK,CAAC,KAAK,EAAE,IAAI,EAAEK,GAAG,CAAC,EAAEJ,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IACjF,CAAC,MAAM;MACLY,CAAC,GAAGd,KAAK,CAACe,aAAa,EAAEb,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IACxD;IAEA,MAAMc,KAAK,GAAGb,UAAU,CACtBW,CAAC,EACAG,QAAQ,IAAK;MACZ,IAAIC,OAAO,GAAG,EAAE;MAChBD,QAAQ,CAACE,OAAO,CAAEC,GAAG,IAAK;QACxBF,OAAO,CAACG,IAAI,CAAC;UAAEC,EAAE,EAAEF,GAAG,CAACE,EAAE;UAAE,GAAGF,GAAG,CAACG,IAAI,CAAC;QAAE,CAAC,CAAC;MAC7C,CAAC,CAAC;MACFd,YAAY,CAACS,OAAO,CAAC;MACrBP,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,EACAC,KAAK,IAAK;MACTY,OAAO,CAACC,GAAG,CAACb,KAAK,CAAC;MAClBC,QAAQ,CAAC,4BAA4B,CAAC;MACtCF,UAAU,CAAC,KAAK,CAAC;IACnB,CACF,CAAC;IAED,OAAO,MAAMK,KAAK,CAAC,CAAC;EACtB,CAAC,EAAE,CAACX,aAAa,EAAEC,GAAG,CAAC,CAAC;EAExB,OAAO;IAAEE,SAAS;IAAEE,OAAO;IAAEE;EAAM,CAAC;AACtC,CAAC;AAACL,EAAA,CAtCWH,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}